import{b as u,a as t,k as h,q as m,z as c,l as f,t as r,d as x,F as v,n as b,o as d}from"./vendor-yjUBYCCz.js";import{_ as k}from"./index-f79Mi8BH.js";const _={data(){return{title:"正则工具",pattern:"",flags:{g:!0,i:!1,m:!1,s:!1,u:!1,y:!1},input:"",replaceWith:"",matches:[],highlighted:"",replaced:"",splitResult:[],error:""}},computed:{flagString(){return Object.entries(this.flags).filter(([,s])=>s).map(([s])=>s).join("")},allMatchTexts(){return this.matches.map(n=>n.text)}},watch:{pattern(){this.apply()},flags:{deep:!0,handler(){this.apply()}},input(){this.apply()},replaceWith(){this.apply()}},mounted(){document.title=this.title,this.apply()},methods:{clearAll(){this.pattern="",this.replaceWith="",this.input=""},apply(){if(this.error="",this.matches=[],this.highlighted=this.escapeHtml(this.input),this.replaced=this.input,this.splitResult=[],!this.pattern)return;let n;try{n=new RegExp(this.pattern,this.flagString)}catch(i){this.error=String(i.message||i);return}const s=this.input||"",g=[];if(this.flags.g||this.flags.y){let i;for(n.lastIndex=0;(i=n.exec(s))!==null;){const e=i.index,o=i[0],l=e+o.length,p=[];for(let a=1;a<i.length;a++)p.push(i[a]??"");if(this.matches.push({index:e,end:l,text:o,groups:p}),g.push([e,l]),!this.flags.g&&this.flags.y||o===""&&(n.lastIndex+=1,n.lastIndex>s.length))break}}else{const i=s.match(n);if(i){const e=i.index??s.indexOf(i[0]),o=i[0],l=e+o.length,p=[];for(let a=1;a<i.length;a++)p.push(i[a]??"");this.matches.push({index:e,end:l,text:o,groups:p}),g.push([e,l])}}this.highlighted=this.markRanges(s,g);try{this.replaced=s.replace(n,this.replaceWith||"")}catch{this.replaced=s}try{this.splitResult=s.split(n)}catch{this.splitResult=[s]}},escapeHtml(n){return String(n).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")},markRanges(n,s){if(!s.length)return this.escapeHtml(n);const g=s.slice().sort((o,l)=>o[0]-l[0]),i=[];let e=0;for(const[o,l]of g){o>e&&i.push(this.escapeHtml(n.slice(e,o)));const p=this.escapeHtml(n.slice(o,l));i.push(`<span class="hl">${p}</span>`),e=l}return e<n.length&&i.push(this.escapeHtml(n.slice(e))),i.join("")}}},V={class:"regex-wrap"},R={class:"topbar"},U={class:"flag"},H={class:"flag"},w={class:"flag"},S={class:"flag"},T={class:"flag"},M={class:"flag"},W={class:"content"},j={class:"pane"},I={class:"pane"},A={class:"result"},B={key:0,class:"error"},C={class:"stats"},L={key:0},N=["innerHTML"],D={class:"section"},E={key:0,class:"empty"},F={key:1,class:"groups"},O={class:"group-head"},q={class:"group-list"},z={class:"section"},P={class:"code"},G={class:"section"},J={class:"code"},K={class:"section"},Q={class:"code"};function X(n,s,g,i,e,o){return d(),u("div",V,[t("div",R,[s[16]||(s[16]=t("span",{class:"lbl"},"模式",-1)),h(t("input",{"onUpdate:modelValue":s[0]||(s[0]=l=>e.pattern=l),class:"input",placeholder:"输入正则表达式，例如：(\\\\w+)@(\\\\w+)"},null,512),[[m,e.pattern]]),s[17]||(s[17]=t("span",{class:"lbl"},"标志",-1)),t("label",U,[h(t("input",{"onUpdate:modelValue":s[1]||(s[1]=l=>e.flags.g=l),type:"checkbox"},null,512),[[c,e.flags.g]]),s[10]||(s[10]=f("g",-1))]),t("label",H,[h(t("input",{"onUpdate:modelValue":s[2]||(s[2]=l=>e.flags.i=l),type:"checkbox"},null,512),[[c,e.flags.i]]),s[11]||(s[11]=f("i",-1))]),t("label",w,[h(t("input",{"onUpdate:modelValue":s[3]||(s[3]=l=>e.flags.m=l),type:"checkbox"},null,512),[[c,e.flags.m]]),s[12]||(s[12]=f("m",-1))]),t("label",S,[h(t("input",{"onUpdate:modelValue":s[4]||(s[4]=l=>e.flags.s=l),type:"checkbox"},null,512),[[c,e.flags.s]]),s[13]||(s[13]=f("s",-1))]),t("label",T,[h(t("input",{"onUpdate:modelValue":s[5]||(s[5]=l=>e.flags.u=l),type:"checkbox"},null,512),[[c,e.flags.u]]),s[14]||(s[14]=f("u",-1))]),t("label",M,[h(t("input",{"onUpdate:modelValue":s[6]||(s[6]=l=>e.flags.y=l),type:"checkbox"},null,512),[[c,e.flags.y]]),s[15]||(s[15]=f("y",-1))]),s[18]||(s[18]=t("span",{class:"lbl"},"替换",-1)),h(t("input",{"onUpdate:modelValue":s[7]||(s[7]=l=>e.replaceWith=l),class:"input",placeholder:"替换模板，例如：$1[$2]"},null,512),[[m,e.replaceWith]]),t("button",{class:"btn",onClick:s[8]||(s[8]=(...l)=>o.clearAll&&o.clearAll(...l))}," 清空 ")]),t("div",W,[t("div",j,[s[19]||(s[19]=t("h3",null,"输入",-1)),h(t("textarea",{"onUpdate:modelValue":s[9]||(s[9]=l=>e.input=l),class:"editor"},null,512),[[m,e.input]])]),t("div",I,[s[24]||(s[24]=t("h3",null,"输出",-1)),t("div",A,[e.error?(d(),u("div",B,r(e.error),1)):x("",!0),t("div",C,[t("span",null,"匹配数："+r(e.matches.length),1),o.flagString?(d(),u("span",L,"标志：/"+r(o.flagString)+"/",1)):x("",!0)]),t("div",{class:"highlight",innerHTML:e.highlighted},null,8,N),t("div",D,[s[20]||(s[20]=t("div",{class:"section-title"}," 分组 ",-1)),e.matches.length?(d(),u("div",F,[(d(!0),u(v,null,b(e.matches,(l,p)=>(d(),u("div",{key:p,class:"group-item"},[t("div",O," 匹配 "+r(p+1)+"："+r(l.text)+" ["+r(l.index)+"-"+r(l.end)+"] ",1),t("ul",q,[t("li",null,"第 0 组："+r(l.text),1),(d(!0),u(v,null,b(l.groups,(a,y)=>(d(),u("li",{key:y}," 第 "+r(y)+" 组："+r(a),1))),128))])]))),128))])):(d(),u("div",E," 无匹配 "))]),t("div",z,[s[21]||(s[21]=t("div",{class:"section-title"}," 匹配文本汇总 ",-1)),t("pre",P,r(o.allMatchTexts.join(" | ")),1)]),t("div",G,[s[22]||(s[22]=t("div",{class:"section-title"}," 替换结果 ",-1)),t("pre",J,r(e.replaced),1)]),t("div",K,[s[23]||(s[23]=t("div",{class:"section-title"}," 分割结果 ",-1)),t("pre",Q,r(e.splitResult.join(" | ")),1)])])])])])}const $=k(_,[["render",X],["__scopeId","data-v-72fcd143"]]);export{$ as default};
